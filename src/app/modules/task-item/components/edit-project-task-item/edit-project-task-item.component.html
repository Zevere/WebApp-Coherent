<div class="container">
    <div class="row">
        <div class="col-md-12">
            <a class="btn btn-light" [routerLink]="['/users', taskList.owner, 'lists', taskList.id, 'tasks']">
                <i class="fa fa-chevron-circle-left"></i>
                Back to Project
            </a>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-9">
            <form [formGroup]="taskItemForm" (ngSubmit)="submit()">
                <div class="form-group">
                    <label for="title">Title:</label>
                    <input type="text" class="form-control" id="title" placeholder="Title of the task"
                           formControlName="title">
                </div>

                <div class="form-group">
                    <label for="description">Description:</label>
                    <textarea class="form-control" id="description" rows="3" formControlName="description"></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-3">
                        <label for="stage">Stage</label>
                        <select id="stage" class="form-control" formControlName="stage">
                            <option *ngFor="let s of stages" [value]="s.value">
                                {{ s.key }}
                            </option>
                        </select>
                    </div>
                    <div class="form-group col-md-3">
                        <label for="priority">Priority</label>
                        <select id="priority" class="form-control" formControlName="priority">
                            <option *ngFor="let p of priorities" [value]="p.value">
                                {{ p.key }}
                            </option>
                        </select>
                    </div>
                    <div class="form-group col-md-3">
                        <label for="kind">Kind</label>
                        <input type="text" class="form-control" id="kind" placeholder="Kind" formControlName="kind">
                    </div>
                    <div class="form-group col-md-3">
                        <label for="progress">Progress:</label>
                        <input type="range" class="custom-range" id="progress" min="0" max="100" step="1"
                               formControlName="progress">
                    </div>
                </div>

                <!--<div class="form-row align-items-center">-->
                    <!--<ng-container *ngFor="let t of userTags">-->
                        <!--<div class="col-auto">-->
                            <!--<input type="text" class="form-control" [value]="t" formControlName="userTags">-->
                        <!--</div>-->
                    <!--</ng-container>-->
                <!--</div>-->

                <button type="submit" class="btn btn-primary pull-right"
                        [disabled]="isWaitingForResponse || taskItemForm.pristine || taskItemForm.invalid">
                    <i class="fa fa-save"></i>
                    Save
                </button>
            </form>
            <br>
            <br>
            <div class="row text-center">
                <div class="alert alert-danger" *ngIf="error">
                    Operation Failed!
                    <br/>
                    <p> {{ error }} </p>
                </div>
            </div>

            <ngb-tabset>
                <ngb-tab>
                    <ng-template ngbTabTitle>
                        <i class="fa fa-comments text-success"></i> Comments
                    </ng-template>
                    <ng-template ngbTabContent>
                        <app-comments-thread [comments]="task.comments" allowPost="true"></app-comments-thread>
                    </ng-template>
                </ngb-tab>
                <ngb-tab>
                    <ng-template ngbTabTitle>
                        <i class="fa fa-bell text-secondary"></i> Recent Activities
                    </ng-template>
                    <ng-template ngbTabContent>
                        <p>
                            <a href="#">bobby</a> commented on <a href="#">my-school-project</a> 2 minutes ago.
                        </p>
                        <p>
                            <a href="#">alice0</a> updated task <a href="#"><em>Design home page</em></a> yesterday.
                        </p>
                        <p>
                            <a href="#">bobby</a> added <a href="#">chuck</a> as a collaborator 2 days ago.
                        </p>
                    </ng-template>
                </ngb-tab>
            </ngb-tabset>
        </div>
        <div class="col-md-3">
            <app-task-item-summary [taskItem]="task" [allowEdit]="true"></app-task-item-summary>
        </div>
    </div>
</div>



